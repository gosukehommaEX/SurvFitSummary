% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_test_ph_assumption.R
\name{plot_test_ph_assumption}
\alias{plot_test_ph_assumption}
\title{Plot Diagnostic Plots for Parametric Distribution Assumption Testing}
\usage{
plot_test_ph_assumption(dataset, add_regression_line = FALSE)
}
\arguments{
\item{dataset}{A data frame containing survival analysis data with columns:
ARM (treatment arm), SURVTIME (survival time), EVENT (event indicator)}

\item{add_regression_line}{Logical indicating whether to add linear regression
lines with confidence intervals to the plots. Default is FALSE}
}
\value{
A ggplot object containing a single row of 3 diagnostic plots with shared legend at bottom
}
\description{
This function creates diagnostic plots to assess the appropriateness of
parametric survival distributions. It generates three plots: Weibull/Exponential
diagnostic (log(-log(S(t))) vs log(t)), Gompertz diagnostic (log(-log(S(t))) vs t),
and Log-normal diagnostic (Î¦^-1(1-S(t)) vs log(t)).
}
\details{
The function performs the following operations:
\itemize{
\item Fits Kaplan-Meier curves using \code{survival::survfit()}
\item Transforms survival estimates for diagnostic plotting
\item Creates three diagnostic plots to assess distributional assumptions
}

Interpretation guidelines:
\itemize{
\item \strong{Weibull/Exponential}: If log(-log(S(t))) vs log(t) is approximately
linear, Weibull (or Exponential if parallel) is appropriate
\item \strong{Gompertz}: If log(-log(S(t))) vs t is approximately linear,
Gompertz distribution is appropriate
\item \strong{Log-normal}: If Î¦^-1(1-S(t)) vs log(t) is approximately linear,
Log-normal distribution is appropriate
}

Colors are automatically assigned based on number of ARM levels:
\itemize{
\item 1 ARM: #004C97 (blue)
\item 2 ARMs: #004C97 (blue), #F0B323 (gold)
\item 3 ARMs: #004C97 (blue), #F0B323 (gold), #658D1B (green)
\item 4 ARMs: #004C97, #F0B323, #658D1B, #A62B4E
\item 5 ARMs: #004C97, #F0B323, #658D1B, #A62B4E, #D91E49
\item 6+ ARMs: #004C97, #F0B323, #658D1B, #A62B4E, #D91E49, #939597
}
}
\examples{
\dontrun{
# Example 1: Single ARM analysis
dataset1 <- generate_dummy_survival_data(
  arm = c("DrugA"),
  n = c(200),
  hazards = log(2) / 18,
  dropout_per_year = 0.1,
  seed = 123
)

dataset1_processed <- processing_dataset(
  dataset = dataset1,
  column_arm = "ARM",
  column_survtime = "SURVTIME",
  column_cnsr = "CNSR",
  column_event = NULL
)

# Plot
p1 <- plot_test_ph_assumption(dataset1_processed)
print(p1)

# Example 2: Two-arm analysis
dataset2 <- generate_dummy_survival_data(
  arm = c("Treatment", "Control"),
  n = c(100, 100),
  hazards = log(2) / c(20, 15),
  dropout_per_year = 0.1,
  seed = 456
)

dataset2_processed <- processing_dataset(
  dataset = dataset2,
  column_arm = "ARM",
  column_survtime = "SURVTIME",
  column_cnsr = "CNSR",
  column_event = NULL
)

# Plot without regression lines
p2 <- plot_test_ph_assumption(dataset2_processed)
print(p2)

# Plot with regression lines
p2_reg <- plot_test_ph_assumption(dataset2_processed, add_regression_line = TRUE)
print(p2_reg)

# Example 3: Three-arm trial
dataset3 <- generate_dummy_survival_data(
  arm = c("Treatment1", "Treatment2", "Control"),
  n = c(100, 100, 100),
  hazards = log(2) / c(22, 18, 15),
  dropout_per_year = 0.1,
  seed = 789
)

dataset3_processed <- processing_dataset(
  dataset = dataset3,
  column_arm = "ARM",
  column_survtime = "SURVTIME",
  column_cnsr = "CNSR",
  column_event = NULL
)

# Plot
p3 <- plot_test_ph_assumption(dataset3_processed)
print(p3)

# Example 4: Four-arm trial with regression lines
dataset4 <- generate_dummy_survival_data(
  arm = c("TrtA", "TrtB", "TrtC", "Control"),
  n = c(75, 75, 75, 75),
  hazards = log(2) / c(24, 20, 18, 15),
  dropout_per_year = 0.1,
  seed = 101
)

dataset4_processed <- processing_dataset(
  dataset = dataset4,
  column_arm = "ARM",
  column_survtime = "SURVTIME",
  column_cnsr = "CNSR",
  column_event = NULL
)

# Plot
p4 <- plot_test_ph_assumption(dataset4_processed, add_regression_line = TRUE)
print(p4)
}
}
