% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fitting_surv_mod.R
\name{fitting_surv_mod}
\alias{fitting_surv_mod}
\title{Fit Parametric Survival Models with Multiple Distributions}
\usage{
fitting_surv_mod(
  dataset,
  distribution,
  dependent = TRUE,
  control_arm = NULL,
  landmark_times = NULL,
  time_horizon = NULL,
  original_time_scale = NULL
)
}
\arguments{
\item{dataset}{A data frame containing survival analysis data with columns:
ARM (treatment arm), SURVTIME (survival time), EVENT (event indicator)}

\item{distribution}{Character string specifying the parametric distribution.
Must be one of: "exp", "weibull", "lnorm", "llogis", "gompertz", "gengamma", "gamma"}

\item{dependent}{Logical indicating whether to fit dependent model (ARM as covariate).
If TRUE, fits model with ~ ARM formula. If FALSE, fits separate models for each ARM
with ~ 1 formula. Default is TRUE}

\item{control_arm}{Character string specifying which ARM level should be used as
the reference (control) group. If NULL (default), uses the first factor level}

\item{landmark_times}{Numeric vector specifying time points for landmark survival
probability estimation. If NULL (default), landmark survival is not calculated}

\item{time_horizon}{Numeric value specifying the time horizon for restricted mean
survival time (RMST) calculation. If NULL (default), RMST is not calculated}

\item{original_time_scale}{Numeric value for converting results back to original time scale.
If NULL (default), results are in the same units as input data. When provided,
survival metrics are divided by this value to convert back to original scale}
}
\value{
A list containing six components:
\describe{
\item{coef_estimates}{Data frame with parameter estimates, standard errors,
confidence intervals, and p-values. For independent models, statistic and
p.value columns are excluded}
\item{varcovmat}{Data frame in long format with columns: distribution, ARM,
row_param, col_param, value}
\item{cholesky}{Data frame in long format with columns: distribution, ARM,
row_param, col_param, value}
\item{gof_statistics}{Data frame with goodness-of-fit statistics (AIC, BIC)}
\item{landmark_survival}{Data frame with landmark survival probabilities (NULL if not specified)}
\item{survival_metrics}{Data frame with median, mean, and RMST}
}
}
\description{
This function fits parametric survival models to time-to-event data using
various distributions. It supports both dependent (jointly fitted with ARM
as covariate) and independent models.
}
\examples{
\dontrun{
# Example 1: Dependent model (ARM as covariate)
dataset <- generate_dummy_survival_data(
  arm = c("Treatment", "Control"),
  n = c(100, 100),
  hazards = log(2) / c(20, 15),
  dropout_per_year = 0.1,
  seed = 123
)

dataset_processed <- processing_dataset(
  dataset = dataset,
  column_arm = "ARM",
  column_survtime = "SURVTIME",
  column_cnsr = "CNSR",
  column_event = NULL
)

result_dep <- fitting_surv_mod(
  dataset = dataset_processed,
  distribution = "weibull",
  dependent = TRUE,
  control_arm = "Control",
  landmark_times = c(6, 12, 18, 24),
  time_horizon = 36
)

print(result_dep$coef_estimates)
print(result_dep$landmark_survival)
print(result_dep$survival_metrics)

# Example 2: Independent models (separate fits per ARM)
result_indep <- fitting_surv_mod(
  dataset = dataset_processed,
  distribution = "weibull",
  dependent = FALSE,
  landmark_times = c(6, 12, 18, 24),
  time_horizon = 36
)

print(result_indep$coef_estimates)
print(result_indep$gof_statistics)

# Example 3: With time scale conversion
# Data in weeks, convert survival metrics back to months
result_scaled <- fitting_surv_mod(
  dataset = dataset_processed,
  distribution = "exp",
  dependent = TRUE,
  landmark_times = seq(4, 52, by = 4),
  time_horizon = 52,
  original_time_scale = 30.44 / 7  # Convert weeks to months
)

print(result_scaled$survival_metrics)
}
}
