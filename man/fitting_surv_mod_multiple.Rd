% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fitting_surv_mod_multiple.R
\name{fitting_surv_mod_multiple}
\alias{fitting_surv_mod_multiple}
\title{Fit Multiple Parametric Survival Models}
\usage{
fitting_surv_mod_multiple(
  dataset,
  distribution,
  dependent = c(TRUE, FALSE),
  control_arm = NULL,
  landmark_increment = NULL,
  time_horizon = NULL
)
}
\arguments{
\item{dataset}{A data frame containing survival analysis data with columns:
ARM (treatment arm), SURVTIME (survival time), EVENT (event indicator)}

\item{distribution}{Character vector specifying parametric distributions.
Must be a subset of: "exp", "weibull", "lnorm", "llogis", "gompertz", "gengamma", "gamma"}

\item{dependent}{Logical vector or character string. If c(TRUE, FALSE) or "both",
fits both dependent and independent models. If single logical value (TRUE or FALSE),
fits only that model type. Default is c(TRUE, FALSE)}

\item{control_arm}{Character string specifying which ARM level should be used as
the reference (control) group. If NULL (default), uses the first factor level}

\item{landmark_increment}{Numeric value specifying the time interval for landmark survival
probability estimation. If NULL (default), landmark survival is not calculated.
Results will be calculated at times 0, landmark_increment, 2*landmark_increment, etc.}

\item{time_horizon}{Numeric value specifying the time horizon for restricted mean
survival time (RMST) calculation. If NULL (default), RMST is not calculated}
}
\value{
A list containing seven data frames:
\describe{
\item{coef_estimates}{Parameter estimates with distribution and model type}
\item{varcovmat}{Variance-covariance matrices in long format}
\item{cholesky}{Cholesky decompositions in long format}
\item{gof_statistics}{Goodness-of-fit statistics (AIC, BIC)}
\item{landmark_survival}{Landmark survival probabilities with columns:
model_type, ARM, Time, KM, distribution1, distribution2, ...}
\item{survival_metrics}{Median, mean, and restricted mean survival times}
\item{cox_ph_results}{Cox proportional hazards model results with HR and 95\% CI}
}
}
\description{
This function fits multiple parametric survival models to time-to-event data
using various distributions. It supports both dependent and independent models
simultaneously. Cox PH model is always fitted regardless of dependent parameter value.
}
\details{
Landmark survival probabilities are calculated for each distribution at specified time intervals
for each ARM. The Kaplan-Meier estimate is included for each ARM as a reference.
Results are combined across distributions using model_type, ARM, and Time as join keys.

Cox PH model is always fitted and returned, regardless of the dependent parameter.
This allows comparison of parametric and semi-parametric estimates of treatment effect.
}
\examples{
\dontrun{
# Example 1: Basic usage with multiple distributions
dataset <- generate_dummy_survival_data(
  arm = c("Treatment", "Control"),
  n = c(100, 100),
  hazards = log(2) / c(20, 15),
  dropout_per_year = 0.1,
  seed = 123
)

dataset_processed <- processing_dataset(
  dataset = dataset,
  column_arm = "ARM",
  column_survtime = "SURVTIME",
  column_cnsr = "CNSR",
  column_event = NULL
)

results <- fitting_surv_mod_multiple(
  dataset = dataset_processed,
  distribution = c("exp", "weibull", "gompertz"),
  dependent = "both",
  landmark_increment = 6,
  time_horizon = 36
)

# Landmark survival with multiple distributions and ARMs
print(results$landmark_survival)

# Survival metrics
print(results$survival_metrics)

# Cox PH results
print(results$cox_ph_results)

# Example 2: Multiple distributions with dependent models only
results2 <- fitting_surv_mod_multiple(
  dataset = dataset_processed,
  distribution = c("weibull", "lnorm", "gengamma"),
  dependent = TRUE,
  control_arm = "Control",
  landmark_increment = 3,
  time_horizon = 36
)

print(results2$landmark_survival)
print(results2$survival_metrics)

# Example 3: Single distribution
results3 <- fitting_surv_mod_multiple(
  dataset = dataset_processed,
  distribution = "exp",
  dependent = c(TRUE, FALSE),
  landmark_increment = 6,
  time_horizon = 36
)

print(results3$landmark_survival)
}
}
