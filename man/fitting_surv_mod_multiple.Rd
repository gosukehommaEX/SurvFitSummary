% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fitting_surv_mod_multiple.R
\name{fitting_surv_mod_multiple}
\alias{fitting_surv_mod_multiple}
\title{Fit Multiple Parametric Survival Models with Time Scale Conversion}
\usage{
fitting_surv_mod_multiple(
  dataset,
  distribution,
  dependent = c(TRUE, FALSE),
  control_arm = NULL,
  time_scale = "month",
  time_horizon = NULL
)
}
\arguments{
\item{dataset}{A data frame containing survival analysis data with columns:
ARM (treatment arm), SURVTIME (survival time), EVENT (event indicator)}

\item{distribution}{Character vector specifying parametric distributions.
Must be a subset of: "exp", "weibull", "lnorm", "llogis", "gompertz", "gengamma", "gamma"}

\item{dependent}{Logical vector or character string. If c(TRUE, FALSE) or "both",
fits both dependent and independent models. If single logical value (TRUE or FALSE),
fits only that model type. Default is c(TRUE, FALSE)}

\item{control_arm}{Character string specifying which ARM level should be used as
the reference (control) group. If NULL (default), uses the first factor level}

\item{time_scale}{Character string specifying time scale of input data.
Must be one of: "day", "week", "month", "year". Default is "month".
Data is assumed to be in this unit and will be converted to weeks for analysis}

\item{time_horizon}{Numeric value specifying the time horizon (in original time_scale units)
for landmark survival probabilities and RMST calculation. If NULL (default),
uses maximum observed survival time. Automatically converted to weeks}
}
\value{
A list containing seven data frames:
\describe{
\item{coef_estimates}{Parameter estimates with distribution and model type}
\item{varcovmat}{Variance-covariance matrices in long format}
\item{cholesky}{Cholesky decompositions in long format}
\item{gof_statistics}{Goodness-of-fit statistics (AIC, BIC)}
\item{landmark_survival}{Landmark survival probabilities at 4-week intervals (time in weeks)}
\item{survival_metrics}{Median, mean, and restricted mean survival times (in original time_scale units)}
\item{cox_ph_results}{Cox proportional hazards model results with HR and 95\% CI}
}
}
\description{
This function fits multiple parametric survival models to time-to-event data
using various distributions. It supports both dependent and independent models
simultaneously, converts time scales, and automatically generates landmark
survival probabilities at 4-week intervals. Cox PH model is always fitted
regardless of dependent parameter value.
}
\details{
Time scale conversion: Data is assumed to be in the specified time_scale units.
Internal analysis is performed in weeks with 4-week landmark intervals.
Landmark survival probabilities show time in weeks (4-week intervals).
Survival metrics (median, mean, RMST) are converted back to original time_scale units.

Cox PH model is always fitted and returned, regardless of the dependent parameter.
This allows comparison of parametric and semi-parametric estimates of treatment effect.
}
\examples{
\dontrun{
# Example 1: Basic usage with month time scale
dataset <- generate_dummy_survival_data(
  arm = c("Treatment", "Control"),
  n = c(100, 100),
  hazards = log(2) / c(20, 15),
  dropout_per_year = 0.1,
  seed = 123
)

dataset_processed <- processing_dataset(
  dataset = dataset,
  column_arm = "ARM",
  column_survtime = "SURVTIME",
  column_cnsr = "CNSR",
  column_event = NULL
)

results <- fitting_surv_mod_multiple(
  dataset = dataset_processed,
  distribution = c("exp", "weibull", "gompertz"),
  dependent = "both",
  time_scale = "month",
  time_horizon = 60
)

# Landmark survival: time in weeks (4-week intervals)
print(results$landmark_survival)

# Survival metrics: in months (original time_scale)
print(results$survival_metrics)

# Cox PH results
print(results$cox_ph_results)

# Example 2: Year time scale
dataset2 <- generate_dummy_survival_data(
  arm = c("DrugA", "DrugB", "Placebo"),
  n = c(80, 80, 80),
  hazards = log(2) / c(2.5, 2.0, 1.5),
  dropout_per_year = 0.1,
  seed = 456
)

dataset2_processed <- processing_dataset(
  dataset = dataset2,
  column_arm = "ARM",
  column_survtime = "SURVTIME",
  column_cnsr = "CNSR",
  column_event = NULL
)

results2 <- fitting_surv_mod_multiple(
  dataset = dataset2_processed,
  distribution = c("weibull", "lnorm", "gengamma"),
  dependent = c(TRUE, FALSE),
  control_arm = "Placebo",
  time_scale = "year",
  time_horizon = 5
)

# Landmark survival: time in weeks
print(results2$landmark_survival)

# Survival metrics: in years
print(results2$survival_metrics)

# Example 3: Week time scale with dependent models only
results3 <- fitting_surv_mod_multiple(
  dataset = dataset_processed,
  distribution = c("exp", "weibull"),
  dependent = TRUE,
  time_scale = "week",
  time_horizon = 260
)

# Survival metrics: in weeks
print(results3$survival_metrics)

# Example 4: Day time scale
results4 <- fitting_surv_mod_multiple(
  dataset = dataset_processed,
  distribution = "llogis",
  dependent = FALSE,
  time_scale = "day",
  time_horizon = 1825
)

# Survival metrics: in days
print(results4$survival_metrics)
}
}
